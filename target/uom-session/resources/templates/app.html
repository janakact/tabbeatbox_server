<div class="container">
    <div class="container-centre-fixed-alert">
        <feedback></feedback>
    </div>
    <div class="row">
        <div class="col-xs-12 text-center">
            <h1>Adroitlogic - UoM Session - Sample Application</h1>
        </div>
    </div>
    <div class="row">
        &nbsp;
    </div>

    <!--AUTH-->
    <div *ngIf="!authorized">
        <div class="row">
            <div class="col-xs-12">
                <div class="panel">
                <!--<div class="panel panel-default">-->
                    <!--<div class="panel-heading">
                        <h3>Authentication</h3>
                    </div>-->
                    <div class="panel-body">
                        <div class="row text-center">
                            <img [src]="student.avatarURL" class="student-image">
                        </div>
                        <div class="row text-center">
                            <h4>{{student.name}}</h4>
                        </div>
                        <div class="row text-center" *ngIf="authLoading">
                            <img src="resources/img/ajax-loader.gif">
                        </div>
                        <div class="row" *ngIf="!authLoading">
                            <div class="col-xs-4 col-xs-offset-4">
                                <form class="form form-horizontal">
                                    <div class="input-group">
                                        <input type="password" class="form-control" placeholder="Your auth key"
                                               [(ngModel)]="restService.token" (keyup.enter)="authenticate()">
                                  <span class="input-group-btn">
                                    <button class="btn btn-default" type="button" (click)="authenticate()">Go!</button>
                                  </span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--MAIN APPLICATION-->
    <div *ngIf="authorized">
        <div class="row">
            <div class="col-xs-6">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3>Student 1</h3>
                    </div>
                    <div class="panel-body text-center">
                        <div class="row">
                            <div class="col-xs-12">
                                <select class="form-control" (change)="setStudentOne($event.target.value)">
                                    <option *ngFor="#student of studentsList;#i=index" [value]="i">{{student.name}}
                                    </option>
                                </select>
                            </div>

                        </div>
                        <div *ngIf="studentOne">
                            <div class="row">
                                <img [src]="studentOne.avatarURL"
                                     class="student-image">
                            </div>
                            <div class="row">
                                <h2>{{studentOne.name}}</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-6">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3>Student 2</h3>
                    </div>

                    <div class="panel-body text-center">
                        <div class="row">
                            <div class="col-xs-12">
                                <select class="form-control" (change)="setStudentTwo($event.target.value)">
                                    <option *ngFor="#student of studentsList;#i=index" [value]="i">{{student.name}}
                                    </option>
                                </select>
                            </div>

                        </div>
                        <div *ngIf="studentTwo">
                            <div class="row">
                                <img [src]="studentTwo.avatarURL"
                                     class="student-image">
                            </div>
                            <div class="row">
                                <h2>{{studentTwo.name}}</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row text-center">
            <button class="btn btn-default" (click)="vote()">Match</button>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <h2>Your matches</h2>
                <table class="table table-bordered table-striped matches-table" *ngIf="matches.length>0">
                    <thead>
                    <tr>
                        <th></th>
                        <th>Student 1</th>
                        <th>Student 2</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="#match of matches;#i=index">
                        <td class="index-column">
                            {{i+1}}
                        </td>
                        <td>
                            <img [src]="match.studentOne.avatarURL"> {{match.studentOne.name}}
                        </td>
                        <td>
                            <img [src]="match.studentTwo.avatarURL"> {{match.studentTwo.name}}
                        </td>
                        <td class="action-column">
                            <button class="btn btn-sm btn-danger" (click)="deletePair(i)">Remove</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <p class="text-center" *ngIf="matches.length<=0">No matches yet</p>
            </div>
        </div>
    </div>
</div>
<alert-component></alert-component>